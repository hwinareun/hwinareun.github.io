---
title: (240418) TIL
date: 2024-04-18 19:49:00 +09:00
categories: [Studying, ë°ë¸Œì½”ìŠ¤, TIL]
tags: 
  [ë°ë¸Œì½”ìŠ¤, til, javascript, js, node.js, backend, http, router]
---

Node.jsë¡œ ì„œë²„ë¥¼ ë§Œë“¤ì–´ë³´ê¸° ìœ„í•´ ê¸°ë³¸ í˜ì´ì§€ë“¤ì„ ë§Œë“¤ì—ˆë‹¤.

---
- `<div>` *(division)* ë ˆì´ì•„ì›ƒ ë‚˜ëˆ„ê¸°. `</div>`
- `<p>`  *(paragraph)* í•˜ë‚˜ì˜ ë¬¸ë‹¨ ìƒì„±. `</p>`
- ì´ë¯¸ì§€ ì‚½ì…:
    ```html
    <img src="ì´ë¯¸ì§€ì˜ ê²½ë¡œ" width="ì´ë¯¸ì§€ ê°€ë¡œ í¬ê¸°" height="ì´ë¯¸ì§€ ì„¸ë¡œ í¬ê¸°">
    <img src="./img/hwi.png" width="350" height="150">
    ```
    
- í‘œ ìƒì„±:
    ```html
    <table> 
    	<!-- ì—´ ì œëª© -->
    	<th>no.</th>
    	<th>name</th>
    	<th>price/th>
    	
    	<tr> <!-- ì²«ë²ˆì§¸ í–‰ -->
    		<td>1</td>
    		<td>book1</td>
    		<td>price1</td>
    	</tr>
    	
    	<tr> <!-- ë‘ë²ˆì§¸ í–‰ -->
    		<td>1</td>
    		<td>book1</td>
    		<td>price1</td>
    	</tr>
    </table>
    ```
    
- í˜ì´ì§€ ì¤‘ì•™ ì •ë ¬
    
    ```css
    table { /* í˜ì´ì§€ ì¤‘ì•™ì— í…Œì´ë¸” ì •ë ¬ */
       margin-left: auto; margin-right: auto;
    }
    ```
    

---

<div>

<div>

Back-end
===

### ë°±ì—”ë“œì˜ êµ¬ì¡°
- Web Server : ì •ì  í˜ì´ì§€ ë‹´ë‹¹. ë™ì  í˜ì´ì§€ì— ëŒ€í•œ ì²˜ë¦¬ëŠ” WASì—ê²Œ ì „ë‹¬.
- Web Application Server(WAS): ë™ì  í˜ì´ì§€ ë‹´ë‹¹. í•„ìš” ë°ì´í„° ì—°ì‚°ì„ ìœ„í•´ DBì™€ ë°ì´í„° ì¡°íšŒ/ìˆ˜ì •/ì‚­ì œì— ëŒ€í•œ ì²˜ë¦¬ ìš”ì²­.
- Database(DB): ë°ì´í„°ë¥¼ í†µí•©í•´ íš¨ìœ¨ì  ê´€ë¦¬ë¥¼ ìœ„í•œ ë°ì´í„° ì§‘í•©ì²´.

*ì •ì  í˜ì´ì§€ vs ë™ì  í˜ì´ì§€*

- (ì •ì ): í™”ë©´ì˜ ë‚´ìš©/ë°ì´í„° ë“±ì˜ ë³€ë™ì´ ì—†ìŒ.
- (ë™ì ): ë°ì´í„° ì²˜ë¦¬/ì—°ì‚°ì„ í†µí•´ í™”ë©´ì˜ ë‚´ìš© ë° ë°ì´í„° ë³€ë™.

---

### Node.js
: JavaScriptë¥¼ ìŠ¤í¬ë¦½íŠ¸ ì–¸ì–´ ì´ìƒìœ¼ë¡œ ë°±ì—”ë“œ êµ¬í˜„ê¹Œì§€ í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ëŠ” í”Œë«í¼. 

ëª¨ë“ˆ(Module)? : í”„ë¡œê·¸ë¨ ë‚´ë¶€ë¥¼ ê¸°ëŠ¥ë³„ ë‹¨ìœ„ë¡œ ë¶„í• í•œ ë¶€ë¶„.

---

### **ì„œë²„ ë§Œë“¤ê¸°**

```jsx
let http = require('http');
// ë‹¤ë¥¸ ëª¨ë“ˆì˜ ê¸°ëŠ¥ì„ ë¶ˆëŸ¬ì˜¬ ë•ŒëŠ” requireë¥¼ í†µí•´ ëª¨ë“ˆì„ ë¶ˆëŸ¬ì˜´.
// 'http'ëª¨ë“ˆì€ Node.jsê°€ ì´ë¯¸ ê¸°ë³¸ìœ¼ë¡œ ê°€ì§€ê³  ìˆëŠ” ëª¨ë“ˆ.

										// ìš”ì²­, ì‘ë‹µ
function onRequest(request, response){
    response.writeHead(200, {'Content-Type': 'text/html'});
    response.write('hola! main page.');
    response.end();
}

http.createServer(onRequest).listen(8888);
// localhost:8888/ìœ¼ë¡œ í˜ì´ì§€ ì—´ ìˆ˜ ìˆìŒ.
```
---

### **HTTP í”„ë¡œí† ì½œ í…œí”Œë¦¿**
- Head: í†µì‹  ìƒíƒœê°€ ì–´ë–¤ì§€, ì‘ë‹µì´ ì–´ë–¤ í˜•íƒœì¸ì§€ ì ê³  ì•Œë ¤ì¤Œ<div>
	   e.g., HTTP status code: 200(ì •ìƒ), 404(ìš”ì²­í•œ URL ì°¾ì„ ìˆ˜ ì—†ìŒ.)
- BODY: ì›¹ í˜ì´ì§€ í™”ë©´ì— ë¿Œë ¤ì§ˆ ë‚´ìš©ì„ ë‹´ìŒ.

<div>

**ëª¨ë“ˆí™”**
: ì§ì ‘ ë§Œë“  .js íŒŒì¼ë„ ëª¨ë“ˆì²˜ëŸ¼ ë‹¤ë¥¸ .js íŒŒì¼ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ.

```jsx
// server.js
function start(route, handle){ 
		function onRequest(request, response){
        let pathname = url.parse(request.url).pathname;
        route(pathname, handle, response);
    }
	http.createServer(onRequest).listen(8888); //localhost:8888
}

exports.start = start; // module.exports=í”„ë¡œí¼í‹° ë˜ëŠ” exports.í”„ë¡œí¼í‹° => ëª¨ë“ˆ ë‚´ë³´ë‚´ê¸°.
```

```jsx
// index.js
let server = require('./server'); // ëª¨ë“ˆ ì†Œí™˜
...
server.start(router.route, requestHandler.handle); // ëª¨ë“ˆ ê¸°ë™
```

**URL(Uniform Resource Locator)** <div>
: ì¸í„°ë„· ìƒì—ì„œ ì›¹ í˜ì´ì§€ì˜ ìœ„ì¹˜ë¥¼ ì•Œë ¤ì£¼ëŠ” ì£¼ì†Œ.<div>
: Local host: ë‚´ ì»´í“¨í„° ì£¼ì†Œ

---

### router ë§Œë“¤ê¸°
: í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ìš”ì²­ì´ ì™”ì„ ë•Œ ì„œë²„ì—ì„œ ì–´ë–¤ ì‘ë‹µì„ ë³´ë‚´ì£¼ì–´ì•¼ í• ì§€ ê²°ì •í•´ì¤Œ.

```jsx
// router.js
function route(pathname, handle, response){
    console.log('pathname: ' + pathname);
    
    // **TypeError: handle[pathname] is not a function ì—ëŸ¬ ë°©ì§€.**
    if(typeof handle[pathname] == 'function'){
        handle[pathname](response);
    } else { // ì‘ë‹µí•˜ì§€ ì•ŠëŠ” í˜ì´ì§€ì¼ ê²½ìš°.
        response.writeHead(404, {'Content-Type': 'text/html'});
        response.write('not found');
        response.end();
    }
}
// ê²½ë¡œì— ë”°ë¥¸ ì¼ë§Œ.
exports.route = route;
```

**ê° ë£¨íŠ¸ì—ì„œ í• ì¼ ë§Œë“¤ê¸°.**

```jsx
function main(response){
    console.log('main');

    response.writeHead(200, {'Content-Type': 'text/html'});
    response.write('main page: lee hanhwi');
    response.end();
}

function login(response){
   ...
}

let handle = {} // key:value
handle['/'] = main;
handle['/login'] = login;

exports.handle = handle;
```
---

â“ğŸ¤”â“ğŸ¤”â“

ì‹¤ìŠµì„ ë”°ë¼ í•˜ë˜ ì¤‘ ê°•ì˜ì—ì„œëŠ” `node index.js`ë¥¼ í„°ë¯¸ë„ì— ì¹˜ë©´ <div>
`pathname: /` ì´ê²ƒë§Œ ë– ì•¼ í•˜ëŠ”ë° ë‚˜ëŠ” `pathname: /favicon.ico` ì´ê²ƒë„ ê³„ì† ë–´ë‹¤.
<div>
ì˜¤ë¥˜ì¸ê°€ ì‹¶ì€ë° ë˜ í˜ì´ì§€ëŠ” ì‘ë™ ëœë‹¤. ê°•ì˜ë¥¼ ë©ˆì¶”ê³  êµ¬ê¸€ì— ê²€ìƒ‰í•´ë³´ì•˜ë‹¤.<div>
ê²°ë¡ ì€ â€˜ë¸Œë¼ìš°ì €ì—ì„œ ìë™ìœ¼ë¡œ ìš”ì²­ì„ í•´ì„œ ë‚˜ì˜¤ëŠ” ê²ƒì´ë‹¤â€™.. ì˜¤ë¥˜ëŠ” ì•„ë‹ˆë¼ ë‹¤í–‰ì´ê¸´ í•¨.
<div>
ìŠ¤íƒ ì˜¤ë²„í”Œë¡œìš°ë¼ê³  í”í•œ ì´ìŠˆì¸ê°€ë³´ë”ë¼.<div>
ê²€ìƒ‰í•˜ë©´ ë‹¤ì–‘í•œ í•´ê²° ë°©ë²•ì´ ìˆì–´ ì°¸ê³ ê°€ ê°€ëŠ¥í–ˆë‹¤.
<div>
`/favicon.ico` í˜¸ì¶œì´ ë“¤ì–´ì™”ì„ ë•Œ ì‘ë‹µì„ ëë‚´ëŠ” ë°©ë²•ì„ ê°€ì ¸ì™€ í•´ê²°í–ˆë‹¤.

```jsx
 // router.js
 ...
 if (pathname === '/favicon.ico') {
        response.writeHead(200, { 'Content-Type': 'image/x-icon' });
        return response.end();
 }
 ...
```
ì´ì œ `pathname: /favicon.ico`ì´ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤!